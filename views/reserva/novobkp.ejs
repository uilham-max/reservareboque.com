<!DOCTYPE html>
<html lang="en">

<head>
    <%-include('../partials/header.ejs')%>
</head>

<body>
    <div class="container">
        <%-include('../partials/navbarReservaadmin.ejs')%>
            <div class="card">
                <div class="card-body">
                    <h3>Criar Reserva</h3>
                    <form action="/reserva/salvar" method="POST">

                        <div class="form-group">
                            <label for="reboque">Reboque</label>
                            <select id="reboque"  name="reboque" class="form-control" onchange="atualizaDiaria(this)">
                                <option value="" data-default disabled selected >Selecionar</option>
                                <% reboques.forEach( function(reboque){%>
                                    <option value="<%=reboque.valorDiaria%>"><%=reboque.placa%></option>
                                <%})%>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="cliente">Cliente</label>
                            <select id="cliente" name="cliente" class="form-control">
                                <% clientes.forEach( function(cliente){%>
                                    <option  value="<%=cliente.id%>"><%=cliente.nome%></option>
                                <%})%>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="dataSaida">Data saída</label>
                            <input class="form-control" id="dataSaida" type="date" name="dataSaida">
                        </div>

                        <div class="form-group">
                            <label for="dataChegada">Data chegada</label>
                            <input class="form-control" id="dataChegada" type="date" name="dataChegada">
                        </div>

                        <div class="form-group">
                            <label for="valorDiaria">Diaria R$</label>
                            <input class="form-control" id="valorDiaria" type="number" name="valorDiaria"
                                placeholder="Informe o valor da diária do reboque." value="getSelected()"  required>
                        </div>

                        <input class="btn btn-primary" type="submit" value="Salvar">
                        <a href="/reserva/lista" class="btn btn-warning">Lista de reservas</a>
                    </form>
                </div>

            </div>
            <% if(mensagem){%>
                <div class="alert alert-info">
                    <strong>Novo Registro!</strong>
                    <%= mensagem %>
                </div>
                <% }%>
    </div>
    <%-include('../partials/footer.ejs')%>

    <script>
        function atualizaDiaria(e){
            document.getElementById("valorDiaria").value = parseInt(e.value).toFixed(2)
        }
    </script>

</body>

</html>